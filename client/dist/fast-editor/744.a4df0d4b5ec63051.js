"use strict";(self.webpackChunkfast_editor=self.webpackChunkfast_editor||[]).push([[744],{6744:(Fs,wt,f)=>{f.r(wt),f.d(wt,{CadastroModule:()=>Us});var ht=f(6895),dt=f(529),_=f(433),r=f(8256);let se=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[ht.ez]}),s})();var et=(()=>((et||(et={})).baseUrl="http://localhost:8080",et))();const xt=s=>`${et.baseUrl}/api/v1/${s}`,q={type:null,entityIds:null,skip:!1,payload:null};let ft=!1;function Q(s,t,e){w(s,t,e),ft=!0}function w(s,t,e){!1===ft&&(q.type=s,q.entityIds=t,q.payload=e)}let st={resettable:!1,ttl:null,producerFn:void 0};function pt(){return st}var j=f(7579);const gt={now:()=>(gt.delegate||Date).now(),delegate:void 0};class Et extends j.x{constructor(t=1/0,e=1/0,i=gt){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:n,_timestampProvider:a,_windowTime:o}=this;e||(i.push(t),!n&&i.push(a.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:n}=this,a=n.slice();for(let o=0;o<a.length&&!t.closed;o+=i?1:2)t.next(a[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:n}=this,a=(n?1:2)*t;if(t<1/0&&a<i.length&&i.splice(0,i.length-a),!n){const o=e.now();let u=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)u=c;u&&i.splice(0,u+1)}}}const ce=new j.x,At=new Et(50,5e3),le=new j.x,yt=typeof window<"u",k={};yt&&(window.$$stores=k,window.$$queries={});var x=f(655);function J(s,t){return s.hasOwnProperty(t)}function M(s){return null==s}function D(s){return M(s)?[]:Array.isArray(s)?s:[s]}var N=(()=>{return(s=N||(N={})).Set="Set",s.Add="Add",s.Update="Update",s.Remove="Remove",N;var s})();function It(s){const t=typeof s;return null!=s&&("object"==t||"function"==t)}function it(s){return Array.isArray(s)}function Pt(s){return!1===M(s)}function B(s){return!!it(s)&&0===s.length}function I(s){return"function"==typeof s}function W(s){return void 0===s}function Ct(s){return s.hasOwnProperty("active")}function Ut(s){return it(s)}function Tt({active:s,ids:t,entities:e}){return Ut(s)?function be(s,t){const e=s.filter(i=>t.indexOf(i)>-1);return e.length===s.length?s:e}(s,t):!1===J(e,s)?null:s}function Ft(s,t){let e={};for(const i of Object.keys(s))e[i]=t(s[i]);return e}var nt=f(1135),rt=f(4004),Ae=f(4671),kt=f(4482),Dt=f(5403);function Pe(s,t){return s===t}function Nt(s){Object.freeze(s);const t="function"==typeof s,e=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(s).forEach(function(i){e.call(s,i)&&(!t||"caller"!==i&&"callee"!==i&&"arguments"!==i)&&null!==s[i]&&("object"==typeof s[i]||"function"==typeof s[i])&&!Object.isFrozen(s[i])&&Nt(s[i])}),s}function Vt(s){return null!=s&&"false"!=`${s}`}function vt(s){return Vt(s)&&"Object"===s.constructor.name}Error;const at="akitaConfig";var Te=f(9646);const Fe=new j.x,$t=new nt.X(!1),$={activeTransactions:0,batchTransaction:null};function jt(){return $.activeTransactions>0}function bt(s,t){!function ke(){jt()||($.batchTransaction=new j.x),$.activeTransactions++,$t.next(!0)}();try{return s.apply(t)}finally{Q("@Transaction"),function De(){0==--$.activeTransactions&&($.batchTransaction.next(!0),$.batchTransaction.complete(),$t.next(!1),Fe.next(!0))}()}}function Mt(){return function(s,t,e){const i=e.value;return e.value=function(...n){return bt(()=>i.apply(this,n),this)},e}}class Bt{constructor(t,e={}){this.options=e,this.inTransaction=!1,this.cache={active:new nt.X(!1),ttl:null},this.onInit(t)}setLoading(t=!1){t!==this._value().loading&&(w("Set Loading"),this._setState(e=>({...e,loading:t})))}setHasCache(t,e={restartTTL:!1}){if(t!==this.cache.active.value&&this.cache.active.next(t),e.restartTTL){const i=this.getCacheTTL();i&&(null!==this.cache.ttl&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),i))}}getValue(){return this.storeValue}setError(t){t!==this._value().error&&(w("Set Error"),this._setState(e=>({...e,error:t})))}_select(t){return this.store.asObservable().pipe((0,rt.U)(e=>t(e.state)),function Ie(s,t=Ae.y){return s=s??Pe,(0,kt.e)((e,i)=>{let n,a=!0;e.subscribe(new Dt.Q(i,o=>{const u=t(o);(a||!s(n,u))&&(a=!1,n=u,i.next(o))}))})}())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[at]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||Nt}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||function ue(){return st.producerFn}()}get resettable(){return Pt(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(t,e=!0){if(I(t)){const i=t(this._value());this.storeValue=this.deepFreeze(i)}else this.storeValue=t;if(!this.store)return this.store=new nt.X({state:this.storeValue}),void this.store.subscribe(({action:i})=>{i&&function fe(s,t){le.next({storeName:s,action:t})}(this.storeName,i)});jt()?this.handleTransaction():this.dispatch(this.storeValue,e)}reset(){this.isResettable()&&(w("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1))}update(t){let e;w("Update");const i=this._value();e=I(t)?I(this._producerFn)?this._producerFn(i,t):t(i):t;const n=this.akitaPreUpdate(i,{...i,...e}),a=vt(i)?n:new i.constructor(n);this._setState(a)}updateStoreConfig(t){this.options={...this.options,...t}}akitaPreUpdate(t,e){return e}destroy(){(!yt||!window.hmrEnabled)&&this===k[this.storeName]&&(delete k[this.storeName],function he(s){ce.next(s)}(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(t){k[this.storeName]=this,this._setState(()=>t),function de(s){At.next(s)}(this.storeName),this.isResettable()&&(this._initialState=t),function Ce(s,t){s||console.error(`@StoreConfig({ name }) is missing in ${t}`)}(this.storeName,this.constructor.name)}dispatch(t,e=!0){let i;e&&(i=q,function ae(){ft=!1}()),this.store.next({state:t,action:i})}watchTransaction(){(function Ne(){return $.batchTransaction?$.batchTransaction.asObservable():(0,Te.of)(!0)})().subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return!1!==this.resettable&&(this.resettable||pt().resettable)}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||pt().ttl}}var Ht;class L extends Bt{constructor(t={},e={}){super({entities:{},ids:[],loading:!0,error:null,...t},e),this.options=e,this.entityActions=new j.x,this.entityIdChanges=new j.x}get selectEntityAction$(){return this.entityActions.asObservable()}get selectEntityIdChanges$(){return this.entityIdChanges.asObservable()}get idKey(){return this.config.idKey||this.options.idKey||"id"}set(t,e={}){if(M(t))return;w("Set Entity");const i=this.akitaPreAddEntity===L.prototype.akitaPreAddEntity;this.setHasCache(!0,{restartTTL:!0}),this._setState(n=>{const a=function Ee({state:s,entities:t,idKey:e,preAddEntity:i,isNativePreAdd:n}){let a,o;if(it(t)){const c=function we(s,t,e){const i={entities:{},ids:[]};for(const n of s){const a=e(n);i.entities[a[t]]=a,i.ids.push(a[t])}return i}(t,e,i);a=c.entities,o=c.ids}else!function xe(s){return s.entities&&s.ids}(t)?(a=n?t:Ft(t,i),o=Object.keys(a).map(c=>isNaN(c)?c:Number(c))):(a=n?t.entities:Ft(t.entities,i),o=t.ids);const u={...s,entities:a,ids:o,loading:!1};return Ct(s)&&(u.active=Tt(u)),u}({state:n,entities:t,idKey:this.idKey,preAddEntity:this.akitaPreAddEntity.bind(this),isNativePreAdd:i});return!1===W(e.activeId)&&(a.active=e.activeId),a}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:N.Set,ids:this.ids})}add(t,e={loading:!1}){const i=D(t);if(B(i))return;const n=function ge({state:s,entities:t,idKey:e,options:i={},preAddEntity:n}){let a={},o=[],u=!1;for(const c of t)if(!1===J(s.entities,c[e])){const l=n(c),b=l[e];a[b]=l,i.prepend?o.unshift(b):o.push(b),u=!0}return u?{newState:{...s,entities:{...s.entities,...a},ids:i.prepend?[...o,...s.ids]:[...s.ids,...o]},newIds:o}:null}({state:this._value(),preAddEntity:this.akitaPreAddEntity.bind(this),entities:i,idKey:this.idKey,options:e});n&&(w("Add Entity"),n.newState.loading=e.loading,this._setState(()=>n.newState),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:N.Add,ids:n.newIds}))}update(t,e){if(W(e))return void super.update(t);let n,i=[];i=I(t)?this.ids.filter(a=>t(this.entities[a])):M(t)?this.ids:D(t),B(i)||(w("Update Entity",i),this._setState(a=>function Ve({state:s,ids:t,idKey:e,newStateOrFn:i,preUpdateEntity:n,producerFn:a,onEntityIdChanges:o}){const u={};let l,c=!1;for(const g of t){if(!1===J(s.entities,g))continue;const S=s.entities[g];let y;y=I(i)?I(a)?a(S,i):i(S):i;const U=y.hasOwnProperty(e)&&y[e]!==S[e];let A;l=g,U&&(c=!0,l=y[e]);const F={...S,...y};A=vt(S)?F:vt(y)?new S.constructor(F):new y.constructor(F),u[l]=n(S,A)}let b=s.ids,m=s.entities;if(c){const[g]=t,{[g]:S,...y}=s.entities;m=y,b=s.ids.map(U=>U===g?l:U),o(g,l)}return{...s,entities:{...m,...u},ids:b}}({idKey:this.idKey,ids:i,preUpdateEntity:this.akitaPreUpdateEntity.bind(this),state:a,newStateOrFn:e,producerFn:this._producerFn,onEntityIdChanges:(o,u)=>{n={oldId:o,newId:u},this.entityIdChanges.next({...n,pending:!0})}})),n&&this.entityIdChanges.next({...n,pending:!1}),this.entityActions.next({type:N.Update,ids:i}))}upsert(t,e,i,n={}){const a=D(t),o=m=>g=>J(this.entities,g)===m,u=I(i)?n.baseClass:i?i.baseClass:void 0,c=I(u),l=a.filter(o(!0)),b=a.filter(o(!1)).map(m=>{const g="function"==typeof e?e({}):e,y={...I(i)?i(m,g):g,[this.idKey]:m};return c?new u(y):y});this.update(l,e),this.add(b),Q("Upsert Entity")}upsertMany(t,e={}){const i=[],n=[],a={};for(const o of t){const u=this.akitaPreCheckEntity(o),c=u[this.idKey];if(J(this.entities,c)){const l=this._value().entities[c],b={...this._value().entities[c],...u},m=e.baseClass?new e.baseClass(b):b,g=this.akitaPreUpdateEntity(l,m),S=g[this.idKey];a[S]=g,n.push(S)}else{const l=e.baseClass?new e.baseClass(u):u,b=this.akitaPreAddEntity(l),m=b[this.idKey];i.push(m),a[m]=b}}Q("Upsert Many"),this._setState(o=>({...o,ids:i.length?[...o.ids,...i]:o.ids,entities:{...o.entities,...a},loading:!!e.loading})),n.length&&this.entityActions.next({type:N.Update,ids:n}),i.length&&this.entityActions.next({type:N.Add,ids:i}),i.length&&this.hasUIStore()&&this.handleUICreation(!0)}replace(t,e){const i=D(t);if(B(i))return;const n={};for(const a of i)n[a]={...e,[this.idKey]:a};w("Replace Entity",t),this._setState(a=>({...a,entities:{...a.entities,...n}}))}move(t,e){const i=this.ids.slice();i.splice(e<0?i.length+e:e,0,i.splice(t,1)[0]),w("Move Entity"),this._setState(n=>({...n,entities:{...n.entities},ids:i}))}remove(t){if(B(this.ids))return;const e=Pt(t);let i=[];i=I(t)?this.ids.filter(n=>t(this.entities[n])):e?D(t):this.ids,!B(i)&&(w("Remove Entity",i),this._setState(n=>function Se({state:s,ids:t}){if(M(t))return function _e(s){return{...s,entities:{},ids:[],active:Ut(s.active)?[]:null}}(s);const e=s.entities;let i={};for(const a of s.ids)!1===t.includes(a)&&(i[a]=e[a]);const n={...s,entities:i,ids:s.ids.filter(a=>!1===t.includes(a))};return Ct(s)&&(n.active=Tt(n)),n}({state:n,ids:i})),e||this.setHasCache(!1),this.handleUIRemove(i),this.entityActions.next({type:N.Remove,ids:i}))}updateActive(t){const e=D(this.active);w("Update Active",e),this.update(e,t)}setActive(t){const e=function me(s,t,e){let i;if(it(s))i=s;else if(It(s)){if(M(e))return;s=Object.assign({wrap:!0},s);const n=t.indexOf(e);if(s.prev){const a=0===n;if(a&&!s.wrap)return;i=a?t[t.length-1]:t[n-1]}else if(s.next){const a=t.length===n+1;if(a&&!s.wrap)return;i=a?t[0]:t[n+1]}}else{if(s===e)return;i=s}return i}(t,this.ids,this.active);void 0!==e&&(w("Set Active",e),this._setActive(e))}addActive(t){const e=D(t);B(e)||e.every(n=>this.active.indexOf(n)>-1)||(w("Add Active",t),this._setState(n=>{const a=Array.from(new Set([...n.active,...e]));return{...n,active:a}}))}removeActive(t){const e=D(t);B(e)||!e.some(n=>this.active.indexOf(n)>-1)||(w("Remove Active",t),this._setState(n=>({...n,active:Array.isArray(n.active)?n.active.filter(a=>-1===e.indexOf(a)):null})))}toggleActive(t){const e=D(t),i=o=>u=>this.active.includes(u)===o,n=e.filter(i(!0)),a=e.filter(i(!1));this.removeActive(n),this.addActive(a),Q("Toggle Active")}createUIStore(t={},e={}){return this.ui=new Qt(t,{name:`UI/${this.storeName}`,idKey:this.idKey,...e}),this.ui}destroy(){super.destroy(),this.ui instanceof L&&this.ui.destroy(),this.entityActions.complete()}akitaPreUpdateEntity(t,e){return e}akitaPreAddEntity(t){return t}akitaPreCheckEntity(t){return t}get ids(){return this._value().ids}get entities(){return this._value().entities}get active(){return this._value().active}_setActive(t){this._setState(e=>({...e,active:t}))}handleUICreation(t=!1){const e=this.ids,i=I(this.ui._akitaCreateEntityFn);let n;const a=o=>{const u=this.entities[o],c=i?this.ui._akitaCreateEntityFn(u):this.ui._akitaCreateEntityFn;return{[this.idKey]:u[this.idKey],...c}};n=t?this.ids.filter(o=>W(this.ui.entities[o])).map(a):e.map(a),t?this.ui.add(n):this.ui.set(n)}hasInitialUIState(){return this.hasUIStore()&&!1===W(this.ui._akitaCreateEntityFn)}handleUIRemove(t){this.hasUIStore()&&this.ui.remove(t)}hasUIStore(){return this.ui instanceof Qt}}(0,x.gn)([Mt(),(0,x.w6)("design:type",Function),(0,x.w6)("design:paramtypes",[Object,Object,Object,Object]),(0,x.w6)("design:returntype",void 0)],L.prototype,"upsert",null),(0,x.gn)([Mt(),(0,x.w6)("design:type",Function),(0,x.w6)("design:paramtypes",["function"==typeof(Ht=typeof T<"u"&&T)?Ht:Object]),(0,x.w6)("design:returntype",void 0)],L.prototype,"toggleActive",null);class Qt extends L{constructor(t={},e={}){super(t,e)}setInitialEntityState(t){this._akitaCreateEntityFn=t}}let Ot=!1;function Zt(s){Ot=s}new Et(1);var Kt=f(9300);function Rt(s,t){return 1===t.split(".").length?s:t.split(".").slice(1).join(".").split(".").reduce((i,n)=>i&&i[n],s)}var qt=f(8306),Jt=f(576),Ze=f(2076),Ke=f(727);class Re extends Ke.w0{constructor(t,e){super()}schedule(t,e=0){return this}}const ot={setInterval(...s){const{delegate:t}=ot;return(t?.setInterval||setInterval)(...s)},clearInterval(s){const{delegate:t}=ot;return(t?.clearInterval||clearInterval)(s)},delegate:void 0};var ze=f(8737);class G{constructor(t,e=G.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,i){return new this.schedulerActionCtor(this,t).schedule(i,e)}}G.now=gt.now;const Wt=new class Je extends G{constructor(t,e=G.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}(class qe extends Re{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,i=0){return ot.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return e;ot.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,i=!1;try{this.work(t)}catch(a){i=!0,n=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ze.P)(i,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}),We=Wt;var Ye=f(7272),ut=f(5698),Ge=f(5032),ts=f(9718),es=f(5577);function Yt(s,t){return t?e=>(0,Ye.z)(t.pipe((0,ut.q)(1),function Xe(){return(0,kt.e)((s,t)=>{s.subscribe(new Dt.Q(t,Ge.Z))})}()),e.pipe(Yt(s))):(0,es.z)((e,i)=>s(e,i).pipe((0,ut.q)(1),(0,ts.h)(e)))}var ss=f(3532);var as=f(3900);const os={pagesControls:!1,range:!1,startWith:1,cacheTimeout:void 0,clearStoreWithCache:!0};(0,x.gn)([function oe(s,t){return function(e,i,n){const a=n.value;return n.value=function(...o){return Q(s,t),a.apply(this,o)},n}}("@Pagination - New Page"),(0,x.w6)("design:type",Function),(0,x.w6)("design:paramtypes",[Object]),(0,x.w6)("design:returntype",void 0)],class us extends class Qe{constructor(t,e){this.query=t,e&&e.resetFn&&pt().resettable&&this.onReset(e.resetFn)}getQuery(){return this.query}getStore(){return this.getQuery().__store__}isEntityBased(t){return Vt(t)}selectSource(t,e){return this.isEntityBased(t)?this.getQuery().selectEntity(t).pipe(function Be(){return(0,Kt.h)(s=>null!=s)}()):e?this.getQuery().select(i=>Rt(i,this.withStoreName(e))):this.getQuery().select()}getSource(t,e){if(this.isEntityBased(t))return this.getQuery().getEntity(t);const i=this.getQuery().getValue();return e?Rt(i,this.withStoreName(e)):i}withStoreName(t){return`${this.storeName}.${t}`}get storeName(){return this.getStore().storeName}updateStore(t,e,i,n=!1){if(this.isEntityBased(e)){const a=this.getStore();n?a.replace(e,t):a.update(e,t)}else{if(i)return void this.getStore()._setState(o=>function He(s,t,e,i=!1){const n=t.split(".");if(1===n.length)return{...s,...e};s={...s};const a=n.length-2;return t.split(".").slice(1).reduce((u,c,l)=>l!==a?(u[c]={...u[c]},u&&u[c]):(u[c]=i||Array.isArray(u[c])||!It(u[c])?e:{...u[c],...e},u&&u[c]),s),s}(o,this.withStoreName(i),t,!0));const a=n?t:o=>({...o,...t});this.getStore()._setState(a)}}onReset(t){const e=this.getStore().reset;this.getStore().reset=(...i)=>{setTimeout(()=>{e.apply(this.getStore(),i),t()})}}}{constructor(t,e={}){super(t,{resetFn:()=>{this.initial=!1,this.destroy({clearCache:!0,currentPage:1})}}),this.query=t,this.config=e,this.metadata=new Map,this.pages=new Map,this.pagination={currentPage:1,perPage:0,total:0,lastPage:0,data:[]},this.initial=!0,this.isLoading$=this.query.selectLoading().pipe(function rs(s,t=Wt){const e=function ns(s=0,t,e=We){let i=-1;return null!=t&&((0,ss.K)(t)?e=t:i=t),new qt.y(n=>{let a=function is(s){return s instanceof Date&&!isNaN(s)}(s)?+s-e.now():s;a<0&&(a=0);let o=0;return e.schedule(function(){n.closed||(n.next(o++),0<=i?this.schedule(void 0,i):n.complete())},a)})}(s,t);return Yt(()=>e)}(0)),this.config={...os,...e};const{startWith:i,cacheTimeout:n}=this.config;this.page=new nt.X(i),function Le(s){return!!s&&(s instanceof qt.y||(0,Jt.m)(s.lift)&&(0,Jt.m)(s.subscribe))}(n)&&(this.clearCacheSubscription=n.subscribe(()=>this.clearCache()))}get pageChanges(){return this.page.asObservable()}get currentPage(){return this.pagination.currentPage}get isFirst(){return 1===this.currentPage}get isLast(){return this.currentPage===this.pagination.lastPage}withControls(){return this.config.pagesControls=!0,this}withRange(){return this.config.range=!0,this}setLoading(t=!0){this.getStore().setLoading(t)}update(t){this.pagination=t,this.addPage(t.data)}addPage(t){this.pages.set(this.currentPage,{ids:t.map(e=>e[this.getStore().idKey])}),this.getStore().upsertMany(t)}clearCache(t={}){this.initial||(Q("@Pagination - Clear Cache"),!1!==t.clearStore&&(this.config.clearStoreWithCache||t.clearStore)&&this.getStore().remove(),this.pages=new Map,this.metadata=new Map),this.initial=!1}clearPage(t){this.pages.delete(t)}destroy({clearCache:t,currentPage:e}={}){this.clearCacheSubscription&&this.clearCacheSubscription.unsubscribe(),t&&this.clearCache(),W(e)||this.setPage(e),this.initial=!0}isPageActive(t){return this.currentPage===t}setPage(t){(t!==this.currentPage||!this.hasPage(t))&&this.page.next(this.pagination.currentPage=t)}nextPage(){this.currentPage!==this.pagination.lastPage&&this.setPage(this.pagination.currentPage+1)}prevPage(){this.pagination.currentPage>1&&this.setPage(this.pagination.currentPage-1)}setLastPage(){this.setPage(this.pagination.lastPage)}setFirstPage(){this.setPage(1)}hasPage(t){return this.pages.has(t)}getPage(t){let e=this.pagination.currentPage;return this.hasPage(e)?this.selectPage(e):(this.setLoading(!0),(0,Ze.D)(t()).pipe((0,as.w)(i=>(e=i.currentPage,bt(()=>{this.setLoading(!1),this.update(i)}),this.selectPage(e)))))}getQuery(){return this.query}refreshCurrentPage(){!1===M(this.currentPage)&&(this.clearPage(this.currentPage),this.setPage(this.currentPage))}getFrom(){return this.isFirst?1:(this.currentPage-1)*this.pagination.perPage+1}getTo(){return this.isLast?this.pagination.total:this.currentPage*this.pagination.perPage}selectPage(t){return this.query.selectAll({asObject:!0}).pipe((0,ut.q)(1),(0,rt.U)(e=>{const i={...this.pagination,data:this.pages.get(t).ids.map(o=>e[o])},{range:n,pagesControls:a}=this.config;return isNaN(this.pagination.total)&&(i.total=1===i.lastPage?i.data?i.data.length:0:i.perPage*i.lastPage,this.pagination.total=i.total),n&&(i.from=this.getFrom(),i.to=this.getTo()),a&&(i.pageControls=function cs(s,t){const e=Math.ceil(s/t),i=[];for(let n=0;n<e;n++)i.push(n+1);return i}(this.pagination.total,this.pagination.perPage)),i}))}}.prototype,"update",null),new class gs{getStoresSnapshot(t=[]){let e={};const n=t.length>0?t:Object.keys(k);for(let a=0;a<n.length;a++){let o=n[a];"router"!==o&&(e[o]=k[o]._value())}return e}setStoresSnapshot(t,e){const i={skipStorageUpdate:!1,lazy:!1,...e};i.skipStorageUpdate&&Zt(!0);let n=t;(function ps(s){return"string"==typeof s})(t)&&(n=JSON.parse(n));const a=Object.keys(n).length;if(i.lazy)At.pipe((0,Kt.h)(o=>n.hasOwnProperty(o)),(0,ut.q)(a)).subscribe(o=>k[o]._setState(()=>n[o]));else for(let o=0,u=Object.keys(n);o<u.length;o++){const c=u[o];k[c]&&k[c]._setState(()=>n[c])}i.skipStorageUpdate&&Zt(!1)}};let H=class extends Bt{constructor(){super({username:"",email:"",password:""})}};H.\u0275fac=function(t){return new(t||H)},H.\u0275prov=r.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H=(0,x.gn)([function Ue(s){return function(t){t[at]={idKey:"id"};for(let e=0,i=Object.keys(s);e<i.length;e++){const n=i[e];"name"===n?t[at].storeName=s[n]:t[at][n]=s[n]}}}({name:"userStore"})],H);let Xt=(()=>{class s{constructor(e){this.http=e,this.baseUrl=xt("auth")}postUser(e){return this.http.post(this.baseUrl,e)}}return s.\u0275fac=function(e){return new(e||s)(r.LFG(dt.eN))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var X=f(7102);let ms=(()=>{class s{constructor(e){this.http=e}getUserById(e){return this.http.get(xt("auth/userById"),{headers:{_id:e}})}}return s.\u0275fac=function(e){return new(e||s)(r.LFG(dt.eN))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),vs=(()=>{class s{constructor(e,i){this.baseService=e,this.router=i,this._id=""}resolve(e,i){return this._id=(s=>{const t=localStorage.getItem("_id");return t?JSON.parse(t):null})(),this._id?.length>1?this.baseService.getUserById(this._id).pipe((0,rt.U)(n=>n||!0)):null}}return s.\u0275fac=function(e){return new(e||s)(r.LFG(ms),r.LFG(X.F0))},s.\u0275prov=r.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var bs=f(262);let Ss=(()=>{class s{constructor(){this.accountState=new r.vpe,this.userData={_id:"354",email:"teste@gmail.com",password:"janselino",username:"VictorJansen"},this.state=!0}switchState(){this.accountState.emit(!this.state)}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=r.Xpm({type:s,selectors:[["app-card-login"]],inputs:{userData:"userData"},outputs:{accountState:"accountState"},decls:19,vars:3,consts:[[1,"md:max-w-7xl","mx-auto","my-auto","px-4","sm:px-6","lg:px-8","h-screen","flex","flex-col","justify-center"],[1,"sigin","mx-auto","h-auto","-mt-1"],[1,"bg-gray-100","p-10","flex","flex-col","w-full","shadow-xl","rounded-xl"],[1,"text-2xl","font-bold","text-gray-800","text-left"],["id","input",1,"flex","flex-col","w-full","mt-5"],[1,"text-gray-500","mb-2"],["id","input",1,"flex","flex-col","w-full"],["id","button",1,"flex","flex-col","w-full","my-5"],["type","button",1,"w-full","py-2","bg-blue-600","rounded-lg","text-blue-100"],[1,"flex","flex-row","items-center","justify-center"],[1,"font-bold"],[1,"flex","justify-evenly","mt-3"],[1,"w-full","text-center","font-medium","text-gray-500",3,"click"]],template:function(e,i){1&e&&(r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),r._uU(4),r.qZA(),r.TgZ(5,"div",4)(6,"p",5),r._uU(7),r.qZA()(),r.TgZ(8,"div",6)(9,"p",5),r._uU(10),r.qZA()(),r.TgZ(11,"div",7)(12,"button",8)(13,"div",9)(14,"div",10),r._uU(15,"Continuar!"),r.qZA()()(),r.TgZ(16,"div",11)(17,"button",12),r.NdJ("click",function(){return i.switchState()}),r._uU(18," Usar outra conta "),r.qZA()()()()()()),2&e&&(r.xp6(4),r.hij(" Continuar como ",i.userData.username," ? "),r.xp6(3),r.Oqu(i.userData.email),r.xp6(3),r.Oqu(i.userData._id))},styles:[".sigin[_ngcontent-%COMP%]{width:30em}@media (max-width: 968px){.sigin[_ngcontent-%COMP%]{width:20em}}"]}),s})();function _s(s,t){if(1&s&&r._UZ(0,"app-card-login",4),2&s){const e=r.oxw();r.Q6J("userData",e.userData)}}function ws(s,t){1&s&&(r.TgZ(0,"span",28),r._uU(1,"Digite um username v\xe1lido - deve conter 3 letras no m\xednimo"),r.qZA())}function xs(s,t){1&s&&(r.TgZ(0,"span",28),r._uU(1,"Digite um email v\xe1lido!"),r.qZA())}function Es(s,t){1&s&&(r.TgZ(0,"span",28),r._uU(1,"Digite uma senha v\xe1lida! "),r._UZ(2,"br"),r._uU(3," Deve conter: "),r._UZ(4,"br"),r._uU(5," - No m\xednimo 8 catect\xe9res "),r._UZ(6,"br"),r._uU(7," - 1 letra mai\xfascula "),r._UZ(8,"br"),r._uU(9," - 1 s\xedmbolo especial "),r.qZA())}function As(s,t){if(1&s&&(r.TgZ(0,"span",29),r._uU(1),r.qZA()),2&s){const e=r.oxw(2);r.xp6(1),r.Oqu(e.generalErrorMessage)}}function Is(s,t){if(1&s){const e=r.EpF();r.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"h2",8),r._uU(4," Entre Aqui! "),r.qZA(),r.TgZ(5,"form",9)(6,"div",10)(7,"label",11),r._uU(8,"Nome de usu\xe1rio"),r.qZA(),r._UZ(9,"input",12),r.YNc(10,ws,2,0,"span",13),r.qZA(),r.TgZ(11,"div",10)(12,"label",14),r._uU(13,"Email"),r.qZA(),r._UZ(14,"input",15),r.YNc(15,xs,2,0,"span",13),r.qZA(),r.TgZ(16,"div",10)(17,"label",16),r._uU(18,"Senha"),r.qZA(),r._UZ(19,"input",17),r.YNc(20,Es,10,0,"span",13),r.qZA(),r.YNc(21,As,2,1,"span",18),r.TgZ(22,"div",19)(23,"button",20),r.NdJ("click",function(){r.CHM(e);const n=r.oxw();return r.KtG(n.handleSubmit())}),r.TgZ(24,"div",21)(25,"div",22),r.O4$(),r.TgZ(26,"svg",23),r._UZ(27,"path",24),r.qZA()(),r.kcU(),r.TgZ(28,"div",25),r._uU(29,"Cadastrar!"),r.qZA()()(),r.TgZ(30,"div",26)(31,"a",27),r._uU(32,"Fazer login"),r.qZA()()()()()()()}if(2&s){const e=r.oxw();r.xp6(5),r.Q6J("formGroup",e.formCadastro),r.xp6(4),r.ekj("border-red-500",e.getInvalidField("username")),r.xp6(1),r.Q6J("ngIf",e.getInvalidField("username")),r.xp6(4),r.ekj("border-red-500",e.getInvalidField("email")),r.xp6(1),r.Q6J("ngIf",e.getInvalidField("email")),r.xp6(4),r.ekj("border-red-500",e.getInvalidField("password")),r.xp6(1),r.Q6J("ngIf",e.getInvalidField("password")),r.xp6(1),r.Q6J("ngIf",e.generalErrorMessage)}}const Ps=[{path:"",component:(()=>{class s{constructor(e,i,n){this.formBuilder=e,this.cadastroService=i,this.route=n,this.formCadastro=this.formBuilder.group({email:["",_.kI.compose([_.kI.email,_.kI.required,_.kI.minLength(3)])],username:["",_.kI.compose([_.kI.required])],password:["",_.kI.compose([_.kI.pattern(/(?=^.{8,}$)(?=.*\d)(?=.*[!@#$%^&*]+)(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/),_.kI.required])]}),this.invalidFields=[],this.generalErrorMessage="",this.userData=this.route.snapshot.data.userData}getInvalidField(e){const i=this.invalidFields.filter(n=>n.name===e);return!!i&&this.invalidFields.includes(i[0])}handleSubmit(){const e=function ie(s,t){const e=[];return t.forEach(i=>{e.push({name:i,valid:s.get(i)?.valid})}),!!e.every(i=>!0===i.valid)||e.filter(i=>!0!==i.valid)}(this.formCadastro,["email","password","username"]);!0===e?(this.invalidFields=[],this.generalErrorMessage="",this.cadastroService.postUser(this.formCadastro.value).pipe((0,rt.U)(i=>i),(0,bs.K)(i=>{throw new Error(i.error.message)})).subscribe({next:i=>{localStorage.setItem("_id",JSON.stringify(i._id))},error:i=>this.generalErrorMessage=i})):this.invalidFields=e.map(i=>i)}ngOnInit(){console.log(this.userData)}}return s.\u0275fac=function(e){return new(e||s)(r.Y36(_.qu),r.Y36(Xt),r.Y36(X.gz))},s.\u0275cmp=r.Xpm({type:s,selectors:[["app-root"]],decls:5,vars:2,consts:[[1,"bg-white","dark:bg-gray-900","h-auto","sm:block","lg:flex"],["src","https://images.unsplash.com/photo-1657393799953-569abfa59c47?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=387&q=80",1,"image"],[3,"userData",4,"ngIf","ngIfElse"],["cadastro",""],[3,"userData"],[1,"md:max-w-7xl","mx-auto","my-auto","px-4","sm:px-6","lg:px-8","h-screen","flex","flex-col","justify-center"],[1,"sigin","mx-auto","h-auto","mt-24"],[1,"bg-gray-100","p-10","flex","flex-col","w-full","shadow-xl","rounded-xl"],[1,"text-2xl","font-bold","text-gray-800","text-left","mb-5"],["action","",1,"w-full",3,"formGroup"],["id","input",1,"flex","flex-col","w-full","my-5"],["for","username",1,"text-gray-500","mb-2"],["type","text","id","username","placeholder","Insira seu nome de usu\xe1rio","formControlName","username",1,"appearance-none","border-2","border-gray-100","rounded-lg","px-4","py-3","placeholder-gray-300","focus:outline-none","focus:ring-2","focus:ring-blue-600","focus:shadow-lg"],["class","input-field mt-1 red-600 text-xs text-red-600",4,"ngIf"],["for","email",1,"text-gray-500","mb-2"],["type","email","id","email","placeholder","Insira seu email","formControlName","email",1,"appearance-none","border-2","border-gray-100","rounded-lg","px-4","py-3","placeholder-gray-300","focus:outline-none","focus:ring-2","focus:ring-blue-600","focus:shadow-lg","input-field"],["for","password",1,"text-gray-500","mb-2"],["type","password","id","password","placeholder","Insira sua senha","formControlName","password",1,"appearance-none","border-2","border-gray-100","rounded-lg","px-4","py-3","placeholder-gray-300","focus:outline-none","focus:ring-2","focus:ring-blue-600","focus:shadow-lg"],["class","input-field mt-4 red-600 text-xs text-red-600",4,"ngIf"],["id","button",1,"flex","flex-col","w-full","my-5"],["type","button",1,"w-full","py-4","bg-blue-600","rounded-lg","text-blue-100",3,"click"],[1,"flex","flex-row","items-center","justify-center"],[1,"mr-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"font-bold"],[1,"flex","justify-evenly","mt-5"],["routerLink","/login",1,"w-full","text-center","font-medium","text-gray-500"],[1,"input-field","mt-1","red-600","text-xs","text-red-600"],[1,"input-field","mt-4","red-600","text-xs","text-red-600"]],template:function(e,i){if(1&e&&(r.TgZ(0,"section",0),r._UZ(1,"img",1),r.YNc(2,_s,1,1,"app-card-login",2),r.YNc(3,Is,33,11,"ng-template",null,3,r.W1O),r.qZA()),2&e){const n=r.MAs(4);r.xp6(2),r.Q6J("ngIf",i.userData)("ngIfElse",n)}},dependencies:[ht.O5,X.yS,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,Ss],styles:[".image[_ngcontent-%COMP%]{width:40%;object-fit:cover;max-height:100vh}.sigin[_ngcontent-%COMP%]{width:30em}@media (max-width: 968px){.image[_ngcontent-%COMP%]{display:none}.sigin[_ngcontent-%COMP%]{width:20em}}"]}),s})(),resolve:{userData:vs}}];let Cs=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({imports:[X.Bz.forChild(Ps),X.Bz]}),s})(),Us=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=r.oAB({type:s}),s.\u0275inj=r.cJS({providers:[Xt],imports:[ht.ez,Cs,_.UX,dt.JF,se]}),s})()}}]);